<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhook MercadoPago - Punto Legal</title>
</head>
<body>
    <h1>Webhook MercadoPago</h1>
    <p>Este endpoint maneja las notificaciones de MercadoPago.</p>
    <p>Para configurar el webhook, usa la funci√≥n de Supabase Edge Function:</p>
    <code>https://tu-proyecto.supabase.co/functions/v1/mercadopago-webhook</code>
    
    <script>
        // Manejar notificaciones de MercadoPago
        if (window.location.search.includes('payment_id=')) {
            const urlParams = new URLSearchParams(window.location.search);
            const paymentId = urlParams.get('payment_id');
            const status = urlParams.get('status');
            
            console.log('üîî Notificaci√≥n de pago recibida:', { paymentId, status });
            
            // Redirigir a la p√°gina de √©xito o fallo seg√∫n el status
            if (status === 'approved') {
                window.location.href = '/payment-success?payment_id=' + paymentId;
            } else if (status === 'rejected') {
                window.location.href = '/payment-failure?payment_id=' + paymentId;
            } else {
                window.location.href = '/payment-pending?payment_id=' + paymentId;
            }
        }
    </script>
</body>
</html>
