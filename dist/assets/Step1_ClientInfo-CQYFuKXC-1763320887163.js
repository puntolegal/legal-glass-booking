import{u as L,a as I,j as s,U as A,C as R,S as M}from"./index-BVa25N6P-1763320887163.js";import{r as u}from"./vendor-BWCXAlAd-1763320887163.js";import{m as r,A as z}from"./animations-D4jTGLyv-1763320887163.js";import"./router-CWP80P1o-1763320887163.js";import"./ui-CvcY_BWp-1763320887163.js";import"./utils-C4xBKWBT-1763320887163.js";import"./supabase-BGJpVdvS-1763320887163.js";const g={nombre:{required:"El nombre es requerido",minLength:{value:3,message:"El nombre debe tener al menos 3 caracteres"},pattern:{value:/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/,message:"El nombre solo puede contener letras"}},email:{required:"El email es requerido",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Por favor ingresa un email válido"}},telefono:{required:"El teléfono es requerido",pattern:{value:/^[\d\s\+\-\(\)]+$/,message:"Por favor ingresa un teléfono válido"},validate:p=>p.replace(/\D/g,"").length>=8||"El teléfono debe tener al menos 8 dígitos"},rut:{required:"El RUT es requerido",pattern:{value:/^[\d\.]+-?[0-9kK]?$/,message:"Formato de RUT inválido (ej: 12345678-9)"},validate:p=>{const d=p.replace(/\./g,"").replace(/-/g,"");return d.length>=8&&d.length<=10||"Ingresa un RUT válido"}},descripcion:{maxLength:{value:500,message:"La descripción no puede exceder 500 caracteres"}}},ee=()=>{var U;const{form:p,service:d,serviceColor:B,setStep:N,formatRUT:V,priceCalculation:j}=L(),o=u.useMemo(()=>{const n=d.category.toLowerCase();return I[n]||I.general},[d.category]),m=(n,i)=>{const b=parseInt(n.slice(1,3),16),P=parseInt(n.slice(3,5),16),F=parseInt(n.slice(5,7),16);return`rgba(${b}, ${P}, ${F}, ${i})`},h=u.useMemo(()=>`linear-gradient(135deg, ${o.primary}, ${o.accent})`,[o]),{register:v,trigger:y,setFocus:D,setValue:G,watch:_,formState:{errors:t}}=p,c=_(),[l,H]=u.useState(0),{isConvenioValido:w,isAdminValido:k}=j,a=u.useMemo(()=>[{name:"nombre",question:"Para comenzar, ¿cuál es tu nombre completo?",placeholder:"Juan Pérez González",type:"text",summaryLabel:"Nombre",autoComplete:"name",rules:g.nombre},{name:"email",question:c.nombre?`¡Un placer, ${c.nombre.split(" ")[0]}! ¿Cuál es tu correo electrónico?`:"¿Cuál es tu correo electrónico?",placeholder:"juan@empresa.com",type:"email",summaryLabel:"Email",autoComplete:"email",rules:g.email},{name:"telefono",question:"¿Cuál es tu número de teléfono para coordinar la consulta?",placeholder:"+56 9 1234 5678",type:"tel",summaryLabel:"Teléfono",autoComplete:"tel",rules:g.telefono},{name:"rut",question:"Perfecto. ¿Cuál es tu RUT?",placeholder:"12345678-9",type:"text",summaryLabel:"RUT",helper:"Formato: 12345678-9",rules:g.rut},{name:"empresa",question:"¿Representas a alguna empresa o proyecto? (opcional)",placeholder:"Mi Empresa SpA",type:"text",summaryLabel:"Empresa",optional:!0},{name:"codigoConvenio",question:"¿Tienes un código de convenio o invitación? (opcional)",placeholder:"Código especial",type:"text",summaryLabel:"Convenio",optional:!0},{name:"descripcion",question:c.nombre?`Gracias, ${c.nombre.split(" ")[0]}. Describe brevemente tu situación legal:`:"Describe brevemente tu situación legal:",placeholder:"Cuéntanos qué necesitas resolver...",summaryLabel:"Descripción",optional:!0,isTextArea:!0,helper:"Puedes usar Shift + Enter para añadir saltos de línea.",rules:g.descripcion}],[c.nombre]);u.useEffect(()=>{const n=a[l];if(!n)return;const i=setTimeout(()=>{D(n.name)},120);return()=>clearTimeout(i)},[l,a,D]);const C=u.useCallback(async()=>{const n=a[l];if(!n)return;let i=!0;n.rules&&(i=await y(n.name)),i&&(l===a.length-1?N(2):H(b=>Math.min(b+1,a.length-1)))},[l,a,y,N]),$=async n=>{n.preventDefault(),await C()},q=u.useMemo(()=>a.findIndex(n=>n.name==="descripcion"),[a]),T=async n=>{l===q&&n.key==="Enter"&&!n.shiftKey&&(n.preventDefault(),await C())},S=a.slice(0,l).filter(n=>{const i=c[n.name];return i&&i.toString().trim().length>0}),x=Math.min(l/a.length*100,100),E=n=>n.name==="rut"?v(n.name,{...n.rules,onChange:i=>{const b=V(i.target.value);G("rut",b,{shouldValidate:!1,shouldDirty:!0})}}):v(n.name,n.rules),e=a[l];return s.jsxDEV(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:s.jsxDEV("div",{className:"bg-slate-900/70 backdrop-blur-md border border-slate-800/70 rounded-3xl p-6 md:p-8 shadow-2xl",style:{boxShadow:`0 32px 65px ${m(o.primary,.1)}`},role:"region","aria-label":"Formulario de información del cliente",children:[s.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxDEV("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-lg",style:{background:h,boxShadow:`0 8px 24px ${m(o.primary,.4)}`},"aria-hidden":"true",children:s.jsxDEV(A,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:236,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:228,columnNumber:11},void 0),s.jsxDEV("div",{children:[s.jsxDEV("h3",{className:"text-xl font-bold text-white",children:"Asistente de Bienvenida"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:239,columnNumber:13},void 0),s.jsxDEV("p",{className:"text-sm text-slate-400",children:"Te guiamos paso a paso para preparar tu consulta estratégica"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:240,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:238,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:227,columnNumber:9},void 0),s.jsxDEV("div",{className:"space-y-6",children:[s.jsxDEV("div",{children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[s.jsxDEV("span",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:["Progreso ",l,"/",a.length]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:249,columnNumber:15},void 0),s.jsxDEV("span",{className:"text-xs text-slate-500",children:[Math.round(x),"%"]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:252,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:248,columnNumber:13},void 0),s.jsxDEV("div",{className:"h-1.5 w-full bg-slate-800/80 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":Math.round(x),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progreso del formulario: ${Math.round(x)}% completado`,children:s.jsxDEV(r.div,{className:"h-full",style:{background:h},initial:{width:0},animate:{width:`${x}%`},transition:{type:"spring",stiffness:120,damping:20}},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:262,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:254,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:247,columnNumber:11},void 0),S.length>0&&s.jsxDEV("div",{className:"space-y-2",children:S.map(n=>s.jsxDEV(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between rounded-2xl border border-slate-800/70 bg-slate-900/60 px-4 py-3 text-sm",children:[s.jsxDEV("div",{className:"flex flex-col",children:[s.jsxDEV("span",{className:"text-xs uppercase tracking-wide text-slate-500",children:n.summaryLabel},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:282,columnNumber:21},void 0),s.jsxDEV("span",{className:"text-slate-200 mt-1",children:c[n.name]},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:283,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:281,columnNumber:19},void 0),s.jsxDEV(R,{className:"w-4 h-4",style:{color:o.primary},"aria-hidden":"true"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:285,columnNumber:19},void 0)]},n.name,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:275,columnNumber:15},void 0))},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:273,columnNumber:13},void 0),s.jsxDEV("form",{onSubmit:$,className:"space-y-4",children:s.jsxDEV(z,{mode:"wait",children:e&&s.jsxDEV(r.div,{variants:K,initial:"hidden",animate:"visible",exit:"hidden",className:"space-y-3",children:[s.jsxDEV(r.h4,{className:"text-xl font-bold text-white",variants:f,id:`question-${e.name}`,children:e.question},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:306,columnNumber:19},void 0),e.helper&&s.jsxDEV(r.p,{className:"text-xs text-slate-400",variants:f,children:e.helper},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:315,columnNumber:21},void 0),s.jsxDEV(r.div,{variants:f,children:[s.jsxDEV("label",{htmlFor:`input-${e.name}`,className:"sr-only",children:e.question},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:321,columnNumber:21},void 0),e.isTextArea?s.jsxDEV("textarea",{...E(e),id:`input-${e.name}`,rows:4,onKeyDown:T,placeholder:e.placeholder,"aria-label":e.question,"aria-describedby":e.helper?`helper-${e.name}`:t[e.name]?`error-${e.name}`:void 0,"aria-invalid":!!t[e.name],"aria-required":!e.optional,className:"w-full rounded-2xl border bg-slate-900/60 px-4 py-4 text-base text-white placeholder-slate-500 focus:outline-none focus-visible:ring-2 transition-all",style:{borderColor:t[e.name]?"#f43f5e":"rgba(148, 163, 184, 0.3)","--focus-ring-color":m(o.primary,.4)},onFocus:n=>{t[e.name]||(n.target.style.borderColor=o.primary,n.target.style.boxShadow=`0 0 0 2px ${m(o.primary,.2)}`)},onBlur:n=>{n.target.style.borderColor=t[e.name]?"#f43f5e":"rgba(148, 163, 184, 0.3)",n.target.style.boxShadow="none"}},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:328,columnNumber:23},void 0):s.jsxDEV("input",{...E(e),id:`input-${e.name}`,type:e.type||"text",placeholder:e.placeholder,autoComplete:e.autoComplete,"aria-label":e.question,"aria-describedby":e.helper?`helper-${e.name}`:t[e.name]?`error-${e.name}`:void 0,"aria-invalid":!!t[e.name],"aria-required":!e.optional,className:"w-full rounded-2xl border bg-slate-900/60 px-4 py-4 text-base text-white placeholder-slate-500 focus:outline-none focus-visible:ring-2 transition-all",style:{borderColor:t[e.name]?"#f43f5e":"rgba(148, 163, 184, 0.3)","--focus-ring-color":m(o.primary,.4)},onFocus:n=>{t[e.name]||(n.target.style.borderColor=o.primary,n.target.style.boxShadow=`0 0 0 2px ${m(o.primary,.2)}`)},onBlur:n=>{n.target.style.borderColor=t[e.name]?"#f43f5e":"rgba(148, 163, 184, 0.3)",n.target.style.boxShadow="none"}},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:359,columnNumber:23},void 0),e.helper&&!t[e.name]&&s.jsxDEV("p",{id:`helper-${e.name}`,className:"text-xs text-slate-400 mt-1",children:e.helper},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:391,columnNumber:23},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:320,columnNumber:19},void 0),t[e.name]&&s.jsxDEV(r.p,{id:`error-${e.name}`,className:"text-sm text-rose-400",variants:f,role:"alert","aria-live":"polite",children:(U=t[e.name])==null?void 0:U.message},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:401,columnNumber:21},void 0),s.jsxDEV(r.p,{className:"text-xs text-slate-500",variants:f,children:["Presiona ",s.jsxDEV("span",{className:"text-slate-200 font-semibold",children:"Enter"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:413,columnNumber:30},void 0)," para continuar",e.isTextArea&&" · Usa Shift + Enter para saltos de línea"]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:412,columnNumber:19},void 0)]},e.name,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:298,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:296,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:295,columnNumber:11},void 0),(w||k)&&s.jsxDEV(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},role:"status","aria-live":"polite",className:"flex items-start gap-2 rounded-2xl border px-4 py-3 text-xs",style:{borderColor:m(o.primary,.3),background:m(o.primary,.1),color:m(o.primary,.95)},children:[s.jsxDEV(M,{className:"w-4 h-4 mt-0.5","aria-hidden":"true"},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:434,columnNumber:15},void 0),s.jsxDEV("div",{children:k?s.jsxDEV("span",{className:"font-medium",children:"Código admin válido · Precio especial $1.000 aplicado."},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:437,columnNumber:19},void 0):s.jsxDEV("span",{className:"font-medium",children:"Código de convenio válido · Descuento del 80% aplicado."},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:439,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:435,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:422,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:246,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:219,columnNumber:7},void 0)},"step1",!1,{fileName:"/Users/macbook/Documents/GitHub/legal-glass-booking/src/components/agendamiento/steps/Step1_ClientInfo.tsx",lineNumber:211,columnNumber:5},void 0)},K={hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.06,delayChildren:.02}}},f={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.2}}};export{ee as default};
